<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DX ÁôºÂá∫Êï∏ÈáèÁµ±Ë®à</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h2 {
            text-align: center;
        }
        .shift-section {
            margin-bottom: 30px;
            padding: 10px;
            border: 1px solid #007BFF;
            background-color: #f9f9f9;
        }
        .shift-section h3 {
            margin: 0;
            text-align: center;
            background-color: black;
            color: grey;
            padding: 10px;
        }
        table {
            width: 80%;
            margin: 0 auto;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }
        th {
            background: #007BFF;
            color: white;
        }
    </style>
</head>
<body>

    <h2>DX ÁôºÂá∫Êï∏ÈáèÁµ±Ë®à</h2>

    <div id="shiftSections"></div>

    <script>
        const players = [
            { role: 'ËÅ∑‰Ωç 1', name: '[DX] MGK', shift: 'morning' },
            { role: 'ËÅ∑‰Ωç 2', name: 'Player 2', shift: 'afternoon' },
            { role: 'ËÅ∑‰Ωç 3', name: '[DX] 123', shift: 'evening' },
            { role: 'ËÅ∑‰Ωç 4', name: 'Player 4', shift: 'evening' },
            { role: 'ËÅ∑‰Ωç 5', name: 'Player 5', shift: 'night' },
            { role: 'ËÅ∑‰Ωç 7', name: 'Player 7', shift: 'midnight' },
            { role: 'ËÅ∑‰Ωç 8', name: 'Player 8', shift: 'morning' },
            { role: 'ËÅ∑‰Ωç 9', name: 'Player 9', shift: 'midnight' }
        ];

        document.addEventListener("DOMContentLoaded", function() {
            fetch("data.txt")
                .then(response => response.text())
                .then(text => processText(text))
                .catch(error => console.error("Error loading file:", error));
        });

        function processText(text) {
            const lines = text.split('\n');
            let currentSender = null;
            let currentAmount = 0;

            players.forEach(player => player.total = 0);

            lines.forEach(line => {
                line = line.trim();

                if (line.startsWith("ÁôºÂá∫:")) {
                    currentSender = line.replace("ÁôºÂá∫: ", "").trim();
                }

                if (line.startsWith("Êï∏Èáè:") && currentSender) {
                    currentAmount = parseInt(line.replace("Êï∏Èáè:", "").trim(), 10) || 0;

                    players.forEach(player => {
                        if (player.name === currentSender) {
                            player.total += currentAmount;
                        }
                    });

                    currentSender = null;
                }
            });

            updateTable();
        }

        function updateTable() {
            const shifts = {
                "morning": "üåÖ Êó©Áè≠ (6:00 AM - 12:00 PM)",
                "afternoon": "‚òÄÔ∏è ÂçàÁè≠ (12:00 PM - 6:00 PM)",
                "evening": "üåÜ ÊôöÁè≠ (6:00 PM - 9:00 PM)",
                "night": "üåô Â∞èÂ§úÁè≠ (9:00 PM - 12:00 AM)",
                "midnight": "üåå Â§ßÂ§úÁè≠ (12:00 AM - 6:00 AM)"
            };

            const shiftSections = document.getElementById("shiftSections");
            shiftSections.innerHTML = "";

            Object.keys(shifts).forEach(shift => {
                const shiftPlayers = players.filter(player => player.shift === shift);

                if (shiftPlayers.length > 0) {
                    let tableHTML = `
                        <div class="shift-section">
                            <h3>${shifts[shift]}</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>ËÅ∑‰Ωç</th>
                                        <th>ÂßìÂêç</th>
                                        <th>Á∏ΩÊï∏Èáè</th>
                                    </tr>
                                </thead>
                                <tbody>
                    `;

                    shiftPlayers.forEach(player => {
                        tableHTML += `
                            <tr>
                                <td>${player.role}</td>
                                <td>${player.name}</td>
                                <td>${player.total}</td>
                            </tr>
                        `;
                    });

                    tableHTML += `</tbody></table></div>`;
                    shiftSections.innerHTML += tableHTML;
                }
            });
        }
    </script>

</body>
</html>
